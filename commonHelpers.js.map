{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["\n    import flatpickr from \"flatpickr\";\n    import \"flatpickr/dist/flatpickr.min.css\";\n    import iziToast from 'izitoast';\n    import 'izitoast/dist/css/iziToast.min.css';\n\n    document.addEventListener('DOMContentLoaded', () => {\n        startBtn.disabled = true;\n    });\n\n    const daysEl = document.querySelector('[data-days]');\n    const hoursEl = document.querySelector('[data-hours]');\n    const minutesEl = document.querySelector('[data-minutes]');\n    const secondsEl = document.querySelector('[data-seconds]');\n    const startBtn = document.querySelector('button[data-start]');\n    const inputPlace = document.querySelector('#datetime-picker');\n\n    let countdown;\n    let userSelectedDate;\n\n    const options = {\n        enableTime: true,\n        time_24hr: true,\n        defaultDate: new Date(),\n        minuteIncrement: 1,\n        onClose(selectedDates) {\n            userSelectedDate = selectedDates[0];\n\n            const now = new Date();\n            if (userSelectedDate <= now) {\n                startBtn.disabled = true;\n                iziToast.warning({\n                    title: 'Warning',\n                    message: 'Please choose a date in the future',\n                });\n            } else {\n                startBtn.disabled = false;\n                inputPlace.setAttribute('readonly', true);\n                \n            }\n        },\n    };\n\n    function addLeadingZero(value) {\n        return value.toString().padStart(2, '0');\n    }\n\n    function updateTimer(selectedDate) {\n        countdown = setInterval(() => {\n            const now = new Date();\n            const diff = selectedDate - now;\n\n            if (diff <= 0) {\n                clearInterval(countdown);\n                daysEl.textContent = '00';\n                hoursEl.textContent = '00';\n                minutesEl.textContent = '00';\n                secondsEl.textContent = '00';\n                startBtn.disabled = false;\n                flatpickr(\"#datetime-picker\").set('disabled', false); \n                return;\n            }\n\n            const remainingTime = convertMs(diff);\n            daysEl.textContent = addLeadingZero(remainingTime.days);\n            hoursEl.textContent = addLeadingZero(remainingTime.hours);\n            minutesEl.textContent = addLeadingZero(remainingTime.minutes);\n            secondsEl.textContent = addLeadingZero(remainingTime.seconds);\n        }, 1000);\n    }\n\n    function convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return { days, hours, minutes, seconds };\n    }\n\n    flatpickr(\"#datetime-picker\", options);\n\n    startBtn.addEventListener('click', () => {\n        if (startBtn.disabled) return; \n\n        const now = new Date();\n        const diff = userSelectedDate - now;\n\n        if (diff <= 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Invalid date selected',\n            });\n            return;\n        }\n\n        startBtn.disabled = true;\n        flatpickr(inputPlace).close(); \n        updateTimer(userSelectedDate);\n    });"],"names":["startBtn","daysEl","hoursEl","minutesEl","secondsEl","inputPlace","countdown","userSelectedDate","options","selectedDates","now","iziToast","addLeadingZero","value","updateTimer","selectedDate","diff","flatpickr","remainingTime","convertMs","ms","days","hours","minutes","seconds"],"mappings":"2FAMI,SAAS,iBAAiB,mBAAoB,IAAM,CAChDA,EAAS,SAAW,EAC5B,CAAK,EAED,MAAMC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAY,SAAS,cAAc,gBAAgB,EACnDC,EAAY,SAAS,cAAc,gBAAgB,EACnDJ,EAAW,SAAS,cAAc,oBAAoB,EACtDK,EAAa,SAAS,cAAc,kBAAkB,EAE5D,IAAIC,EACAC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBF,EAAmBE,EAAc,GAEjC,MAAMC,EAAM,IAAI,KACZH,GAAoBG,GACpBV,EAAS,SAAW,GACpBW,EAAS,QAAQ,CACb,MAAO,UACP,QAAS,oCAC7B,CAAiB,IAEDX,EAAS,SAAW,GACpBK,EAAW,aAAa,WAAY,EAAI,EAG/C,CACT,EAEI,SAASO,EAAeC,EAAO,CAC3B,OAAOA,EAAM,SAAU,EAAC,SAAS,EAAG,GAAG,CAC1C,CAED,SAASC,EAAYC,EAAc,CAC/BT,EAAY,YAAY,IAAM,CAC1B,MAAMI,EAAM,IAAI,KACVM,EAAOD,EAAeL,EAE5B,GAAIM,GAAQ,EAAG,CACX,cAAcV,CAAS,EACvBL,EAAO,YAAc,KACrBC,EAAQ,YAAc,KACtBC,EAAU,YAAc,KACxBC,EAAU,YAAc,KACxBJ,EAAS,SAAW,GACpBiB,EAAU,kBAAkB,EAAE,IAAI,WAAY,EAAK,EACnD,MACH,CAED,MAAMC,EAAgBC,EAAUH,CAAI,EACpCf,EAAO,YAAcW,EAAeM,EAAc,IAAI,EACtDhB,EAAQ,YAAcU,EAAeM,EAAc,KAAK,EACxDf,EAAU,YAAcS,EAAeM,EAAc,OAAO,EAC5Dd,EAAU,YAAcQ,EAAeM,EAAc,OAAO,CAC/D,EAAE,GAAI,CACV,CAED,SAASC,EAAUC,EAAI,CAKnB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAEDP,EAAU,mBAAoBT,CAAO,EAErCR,EAAS,iBAAiB,QAAS,IAAM,CACrC,GAAIA,EAAS,SAAU,OAEvB,MAAMU,EAAM,IAAI,KAGhB,GAFaH,EAAmBG,GAEpB,EAAG,CACXC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,uBACzB,CAAa,EACD,MACH,CAEDX,EAAS,SAAW,GACpBiB,EAAUZ,CAAU,EAAE,QACtBS,EAAYP,CAAgB,CACpC,CAAK"}